(function(){"use strict";var a=typeof window!="undefined"?window:global;if(typeof a.require=="function")return;var b={},c={},d=function(a,b){return{}.hasOwnProperty.call(a,b)},e=function(a,b){var c=[],d,e;/^\.\.?(\/|$)/.test(b)?d=[a,b].join("/").split("/"):d=b.split("/");for(var f=0,g=d.length;f<g;f++)e=d[f],e===".."?c.pop():e!=="."&&e!==""&&c.push(e);return c.join("/")},f=function(a){return a.split("/").slice(0,-1).join("/")},g=function(b){return function(c){var d=f(b),g=e(d,c);return a.require(g)}},h=function(a,b){var d={id:a,exports:{}};b(d.exports,g(a),d);var e=c[a]=d.exports;return e},i=function(a){var f=e(a,".");if(d(c,f))return c[f];if(d(b,f))return h(f,b[f]);var g=e(f,"./index");if(d(c,g))return c[g];if(d(b,g))return h(g,b[g]);throw new Error('Cannot find module "'+a+'"')},j=function(a){for(var c in a)d(a,c)&&(b[c]=a[c])};a.require=i,a.require.define=j,a.require.brunch=!0})(),window.require.define({initialize:function(a,b,c){((function(){var a,c,d;a=b("router"),d=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;assert(_EXPLORER_DATASET!==null,"Failed to load dataset."),e=0,u=_EXPLORER_DATASET.groupings;for(k=0,o=u.length;k<o;k++){i=u[k],v=i.entries;for(l=0,p=v.length;l<p;l++)j=v[l],j.group_id=e++}e=0,w=_EXPLORER_DATASET.question;for(h in w){g=w[h],h=parseInt(h),g.groups=[],x=_EXPLORER_DATASET.groupings;for(m=0,q=x.length;m<q;m++){a=x[m],y=a.entries;for(n=0,r=y.length;n<r;n++)d=y[n],d.qs.contains(h)&&g.groups.push("group-"+d.group_id)}}c={name:"Entire World",contains:[]},z=_EXPLORER_DATASET.country;for(t=0,s=z.length;t<s;t++)b=z[t],c.contains.push(b.alpha2);_EXPLORER_DATASET.regions.unshift(c),A=[];for(f in _EXPLORER_DATASET.regions)A.push(_EXPLORER_DATASET.regions[f].region_index=parseInt(f));return A},c=function(){var a,b;return b="#aaa",jsPlumb.importDefaults({Anchors:["RightMiddle","LeftMiddle"],PaintStyle:{strokeStyle:b,lineWidth:2},Endpoint:"Blank",EndpointStyle:{radius:9,fillStyle:b},Connector:["Bezier",{curviness:30}]}),a={foldback:.8,fillStyle:b,width:9,length:10},jsPlumb._custom_overlay=[["Arrow",{location:.5},a]]},$(function(){var b;return c(),d(),b=new a,Backbone.history.start()})})).call(this)}}),window.require.define({router:function(a,b,c){((function(){var a,d,e,f,g,h,i,j,k,l,m=function(a,b){return function(){return a.apply(b,arguments)}},n=Object.prototype.hasOwnProperty,o=function(a,b){function d(){this.constructor=a}for(var c in b)n.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=b("views/page/map"),j=b("views/page/timeline"),g=b("views/page/rankings"),d=b("views/page/download"),f=b("views/page/profile"),a=b("views/page/availability"),i=b("views/page/splash"),k=b("views/reportgenerator"),l={mapPage:function(){return this._map=this._map||new e},timelinePage:function(){return this._timeline=this._timeline||new j},rankingsPage:function(){return this._rankings=this._rankings||new g},availabilityPage:function(){return this._avail=this._avail||new a},downloadPage:function(){return this._download=this._download||new d},splashPage:function(){return this._splash=this._splash||new i}},c.exports=h=function(a){function b(){this.setCurrent=m(this.setCurrent,this),b.__super__.constructor.apply(this,arguments)}return o(b,a),b.prototype.routes={"":"home",home:"home",map:"map",timeline:"timeline",rankings:"rankings",availability:"availability",download:"download",profile:"profile","profile/:country":"profile"},b.prototype.initialize=function(){var a=this;return k.render($("#report-generator")),k.setInitialState(),this.on("all",function(a){var b,c;c=window.location.hash.slice(1),a=a.split(":");if(a[0]==="route")return $("#main-nav li").removeClass("active"),b=$('#main-nav li a[href$="#'+c+'"]'),b.length===0&&(b=$('#main-nav li a[href$="#'+a[1]+'"]')),b=$(b.parents("li")[0]),b.add(b.parents(".dropdown")).addClass("active")})},b.prototype.setCurrent=function(a,b){return b==null&&(b=!0),a!==this.currentView&&(this.currentView=a,a.renderPage($("#explorer"))),b?$("#report-generator").show():$("#report-generator").hide()},b.prototype.home=function(){var a;return this.setCurrent(l.splashPage(),a=!1)},b.prototype.map=function(){return this.setCurrent(l.mapPage())},b.prototype.timeline=function(){return this.setCurrent(l.timelinePage())},b.prototype.rankings=function(){return this.setCurrent(l.rankingsPage())},b.prototype.availability=function(){var a;return this.setCurrent(l.availabilityPage(),a=!1)},b.prototype.download=function(){return this.setCurrent(l.downloadPage())},b.prototype.profile=function(a){return a==null&&(a=""),this.setCurrent(new f(a))},b}(Backbone.Router)})).call(this)}}),window.require.define({util:function(a,b,c){((function(){c.exports={sortFunction:function(a,b){var c;return c=b.score-a.score,c?c:a.country.localeCompare(b.country)},sortFunctionByName:function(a,b){var c;return c=a.country.localeCompare(b.country),c||(c=b.score-a.score),c}}})).call(this)}}),window.require.define({"views/page/availability":function(a,b,c){((function(){var a,d,e,f,g=function(a,b){return function(){return a.apply(b,arguments)}},h=Object.prototype.hasOwnProperty,i=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},j=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};e=b("views/templates/page/availability"),f=b("views/templates/availability_row"),d=b("views/reportgenerator"),c.exports=a=function(a){function b(){this.clickregion=g(this.clickregion,this),this._repaint=g(this._repaint,this),this._yearToggle=g(this._yearToggle,this),this.renderPage=g(this.renderPage,this),b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.regionId=0,b.prototype.initialize=function(){},b.prototype.renderPage=function(a){return this.$el.html(e()),a.html(this.$el),$("#year-toggles button").click(this._yearToggle),$('button[data-year="2012"]').click(),$(".av-region-toggler").click(this.clickregion)},b.prototype._yearToggle=function(a){var b;return b=$(a.delegateTarget),$("#year-toggles button").removeClass("active"),b.addClass("active"),this.year=$(a.delegateTarget).attr("data-year"),this._repaint()},b.prototype._repaint=function(a,b,c){var e,g,h,i,k,l,m,n,o;a==null&&(a=d.dataset),b==null&&(b=d.questionSet),c==null&&(c=d.region),i=$("#availability tbody"),i.empty(),e=_EXPLORER_DATASET.regions[this.regionId].contains,m=_EXPLORER_DATASET.availability,o=[];for(k=0,l=m.length;k<l;k++){h=m[k],g="db_"+this.year;if(!(g in h))continue;if(n=h[g].alpha2,!(j.call(e,n)>=0))continue;o.push(i.append(f(h[g])))}return o},b.prototype.clickregion=function(a){var b,c,d;return a.preventDefault(),d=$(a.delegateTarget),b=d.attr("id"),c=parseInt(b.substr("7")),this.regionId=c,this._repaint(),$(".av-region-toggler").removeClass("active"),d.addClass("active"),!1},b}(Backbone.View)})).call(this)}}),window.require.define({"views/page/download":function(a,b,c){((function(){var a,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g=Object.prototype.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},i=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};e=b("views/templates/page/download"),d=b("views/reportgenerator"),c.exports=a=function(a){function b(){this._repaint=f(this._repaint,this),this.changeyear=f(this.changeyear,this),this.renderPage=f(this.renderPage,this),this.initialize=f(this.initialize,this),b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.initialize=function(){return d.bind("update",this._repaint)},b.prototype.tx=function(){return $("#custom-csv")},b.prototype.renderPage=function(a){var b,c=this;return this.$el.html(e(_EXPLORER_DATASET)),a.html(this.$el),this._repaint(),this.tx().bind("click",function(){return c.tx().select()}),$('input[name="downloadyear"]').bind("change",this.changeyear),b={filename:function(){return"custom-budget-report.csv"},data:function(){return $("#custom-csv").val()},onComplete:function(){return alert("Your File Has Been Saved!")},onCancel:function(){return null},onError:function(){return null},swf:"downloadify.swf",downloadImage:"images/download.png",width:100,height:30,transparent:!0,append:!1},Downloadify.create("downloadify",b)},b.prototype.changeyear=function(a){return this._repaint()},b.prototype._writeLine=function(a,b){var c,d,e;for(d=0,e=b.length;0<=e?d<e:d>e;0<=e?d++:d--)c=b[d]||"",assert(!(i.call(c,'"')>=0),"Cannot encode string: "+c),i.call(c,",")>=0&&(b[d]='"'+c+'"');return a.push(b.join(","))},b.prototype._csvQuestions=function(a){var b,c,d,e,f,g;c=[],b=["NUMBER","TEXT","A","B","C","D","E"],this._writeLine(c,b),d=_EXPLORER_DATASET.question;for(f=0,g=a.length;f<g;f++)e=a[f],this._writeLine(c,[e,d[e].text,d[e].a,d[e].b,d[e].c,d[e].d,d[e].e]);return c},b.prototype._number_to_letter=function(a){return"The given letters in the source data arent always there. \n'q102l' does not exist while 'q102' does.\nTherefore it is safer to use this technique to extract a letter...",assert(a===-1||a===0||a===33||a===67||a===100,"Invalid value: "+a),{"-1":"e",0:"d",33:"c",67:"b",100:"a"}[a]},b.prototype._csvAnswers=function(a,b,c){var d,e,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;g=[],f=["COUNTRY","COUNTRY_NAME","YEAR","SCORE"];for(p=0,t=c.length;p<t;p++)n=c[p],f.push(n.toString());for(q=0,u=c.length;q<u;q++)n=c[q],f.push(n+"l");this._writeLine(g,f),l={},D=_EXPLORER_DATASET.country;for(r=0,v=D.length;r<v;r++)n=D[r],l[n.alpha2]=n;for(s=0,w=a.length;s<w;s++){e=a[s];if(E=e.alpha2,i.call(_EXPLORER_DATASET.regions[b].contains,E)<0)continue;d=["2006","2008","2010","2012"],k=$('input[name="downloadyear"]:checked').val(),i.call(d,k)>=0?k=[k]:k=d;for(A=0,x=k.length;A<x;A++){o=k[A];if(!(o in e))continue;j=[e.alpha2,e.country,o,e[o]];for(B=0,y=c.length;B<y;B++)h=c[B],j.push(l[e.alpha2]["db_"+o][h]);for(C=0,z=c.length;C<z;C++)h=c[C],m=l[e.alpha2]["db_"+o][h],j.push(this._number_to_letter(m));assert(j.length===f.length),this._writeLine(g,j)}}return g},b.prototype._repaint=function(a,b,c){return a==null&&(a=d.dataset),b==null&&(b=d.questionSet),c==null&&(c=d.region),this.tx().html(this._csvAnswers(a,c,b).join("\n"))},b}(Backbone.View)})).call(this)}}),window.require.define({"views/page/map":function(a,b,c){((function(){var a,d,e,f,g,h=function(a,b){return function(){return a.apply(b,arguments)}},i=Object.prototype.hasOwnProperty,j=function(a,b){function d(){this.constructor=a}for(var c in b)i.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},k=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};g=b("views/templates/page/map"),f=b("views/reportgenerator"),d="world_mill_en",a=["B8282E","F48022","DAC300","007A78","0065A4"],jvm.NumericScale.prototype.getValue=function(b){var c;return c=Math.min(b-1,99),c=(c-c%20)/20,c=a[c],assert(c!==void 0,"Could not process "+b+" ("+c+")"),c},c.exports=e=function(a){function b(){this._clickCountry=h(this._clickCountry,this),this._labelShow=h(this._labelShow,this),this._repaint=h(this._repaint,this),this._mapToggle=h(this._mapToggle,this),this.renderPage=h(this.renderPage,this),this.initialize=h(this.initialize,this),b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.mapData={},b.prototype.countriesInSurvey=[],b.prototype.initialize=function(){return f.bind("update",this._repaint)},b.prototype.renderPage=function(a){var b,c;return this.$el.html(g()),a.html(this.$el),b=this.$el.find("#map"),c=b.vectorMap({map:d,series:{regions:[{}]},regionStyle:{initial:{stroke:"none","stroke-width":"1.0","stroke-opacity":"0.5",fill:"#cccccc"}},backgroundColor:"#ffffff",onRegionLabelShow:this._labelShow,onRegionClick:this._clickCountry,zoomOnScroll:!1}),this.mapObject=b.vectorMap("get","mapObject"),$("#map-toggles button").click(this._mapToggle),$('button[data-year="2012"]').click()},b.prototype._mapToggle=function(a){var b;return b=$(a.delegateTarget),$("#map-toggles button").removeClass("active"),b.addClass("active"),this.year=$(a.delegateTarget).attr("data-year"),this._repaint()},b.prototype._repaint=function(a,b,c){var e,g,h,i,j,l,m,n;a==null&&(a=f.dataset),b==null&&(b=f.questionSet),c==null&&(c=f.region),e=jvm.WorldMap.maps[d].paths,h=_EXPLORER_DATASET.regions[c].contains,this.mapData={},this.mapColor={},this.countriesInSurvey=[];for(j in e)this.mapData[j]=-1,this.mapColor[j]=0;if(f.questionSet.length>0)for(l=0,m=a.length;l<m;l++){g=a[l];if(!(g.alpha2 in e))continue;if(n=g.alpha2,!(k.call(h,n)>=0))continue;if(!(this.year in g))continue;i=g[this.year];if(i<0)continue;assert(i>=-1,"Bad mapping value: "+i),this.countriesInSurvey.push(g.alpha2),this.mapColor[g.alpha2]=Math.max(1,i),this.mapData[g.alpha2]=i}return this.mapObject.series.regions[0].setValues(this.mapColor)},b.prototype._labelShow=function(a,b,c){return this.mapLabel=b,k.call(this.countriesInSurvey,c)>=0?(this.mapLabel.css({opacity:"1.0"}),this.mapLabel.html(this.mapLabel.html()+": "+this.mapData[c])):this.mapLabel.css({opacity:"0.5"})},b.prototype._clickCountry=function(a,b){if(k.call(this.countriesInSurvey,b)>=0)return this.mapLabel.length&&this.mapLabel.remove(),window.location="#profile/"+b},b}(Backbone.View)})).call(this)}}),window.require.define({"views/page/profile":function(a,b,c){((function(){var a,d,e,f,g,h,i,j=function(a,b){return function(){return a.apply(b,arguments)}},k=Object.prototype.hasOwnProperty,l=function(a,b){function d(){this.constructor=a}for(var c in b)k.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=b("views/templates/page/profile"),h=b("views/templates/profile_percentages"),f=b("views/templates/profile_details"),g=b("views/templates/profile_details_future"),i=b("views/templates/question_text"),d=b("views/reportgenerator"),c.exports=a=function(a){function b(){this._animationHackScale=j(this._animationHackScale,this),this._repaint2014=j(this._repaint2014,this),this._onClick2014=j(this._onClick2014,this),this._onToggleMode=j(this._onToggleMode,this),this._repaint=j(this._repaint,this),this.renderPage=j(this.renderPage,this),this.initialize=j(this.initialize,this),b.__super__.constructor.apply(this,arguments)}return l(b,a),b.prototype.initialize=function(a){return this.alpha2=a,this.data=this.lookup(this.alpha2),this.db_2014=$.extend({},this.data.db_2012),d.bind("update",this._repaint)},b.prototype.lookup=function(a){"Look up a country object by alpha2 code";var b,c,d,e;e=_EXPLORER_DATASET.country;for(c=0,d=e.length;c<d;c++){b=e[c];if(b.alpha2===a)return b}return a===""?{}:assert(!1,a+" is not a valid country code.")},b.prototype.renderPage=function(a){var b,c;return c={alpha2:this.alpha2,countries:_EXPLORER_DATASET.country,data:this.data,empty:this.alpha2==="",main_website_url:this._ibp_website_url(this.alpha2)},this.viewPast=!0,this.$el.html(e(c)),a.html(this.$el),this._repaint(),b=this.$el.find(".country-nav-select"),b.chosen(),b.val(this.alpha2).trigger("liszt:updated"),b.bind("change",this._onNavChange),$("#profile-toggle input").bind("change",this._onToggleMode)},b.prototype._repaint=function(a,b){var c,e,i,j,k,l,m,n,o;a==null&&(a=d.dataset),b==null&&(b=d.questionSet),e={percentages:[this._get_percentages(this.data.alpha2,this.data.db_2006,"2006",b),this._get_percentages(this.data.alpha2,this.data.db_2008,"2008",b),this._get_percentages(this.data.alpha2,this.data.db_2010,"2010",b),this._get_percentages(this.data.alpha2,this.data.db_2012,"2012",b)]},$(".percentages").empty().append($(h(e))),$(".percentbar").tooltip({placement:"right",delay:50,animation:!0}),c=this._get_details(this.data,b);if(this.viewPast)$(".past").show(),$(".future").hide(),$(".details").html(f(c));else{$(".future").show(),$(".past").hide(),$(".details").html(g(c)),$(".letter.multi img").bind("click",this._onClick2014),this._repaint2014,o=$(".question-row");for(m=0,n=o.length;m<n;m++)l=o[m],l=$(l),i=parseInt(l.attr("data-question-number")),k=this.db_2014[i],l.find('img[data-score="'+k+'"]').removeClass("inactive").addClass("active")}return this._repaint2014(),this.$el.find("tr.question-row").mouseover(this._onHoverQuestion),this.$el.find("tr.question-row:first").mouseover(),j=function(a,b){return b!==void 0?($(".scores .year-"+a).css("opacity","1.0"),$(".scores .year-"+a+" .bottom").text("Score: "+b)):($(".scores .year-"+a).css("opacity","0.2"),$(".scores .year-"+a+" .bottom").text("-"))},j(2006,e.percentages[0].score),j(2008,e.percentages[1].score),j(2010,e.percentages[2].score),j(2012,e.percentages[3].score),this._repaint2014()},b.prototype._ibp_website_url=function(a){return a==="BJ"&&(a="benin"),a==="QA"||a==="TN"||a==="MM"?"":"http://internationalbudget.org/what-we-do/open-budget-survey/country-info/?country="+a.toLowerCase()},b.prototype._onHoverQuestion=function(a){var b,c,d,e,f,g;return f=$(a.delegateTarget),c=f.attr("data-question-number"),d=_EXPLORER_DATASET.question[c],e=$(".question-box"),e.html(i(d)),g=f.position().top-21,b=$(".details").height()-e.height()-21,e.css({left:$(".details table").width(),top:Math.max(0,Math.min(g,b))}),$("tr.question-row").removeClass("hover"),f.addClass("hover")},b.prototype._onNavChange=function(a){var b;return b=$(a.delegateTarget).val(),b.length===0?window.location="#profile":(assert(b.length===2,"Invalid country code: "+b),window.location="#profile/"+b)},b.prototype._number_to_letter=function(a,b){"The given letters in the source data arent always there. \n'q102l' does not exist while 'q102' does.\nTherefore it is safer to use this technique to extract a letter...";var c;return a===void 0?"":(c=a[b],assert(c===-1||c===0||c===33||c===67||c===100,"Invalid value: "+c),{"-1":"e",0:"d",33:"c",67:"b",100:"a"}[c])},b.prototype._get_percentages=function(a,b,c,e){var f,g,h,i,j,k,l,m,n;if(b===void 0)return{year:c,not_defined:!0};h={total:e.length,year:c,a:0,b:0,c:0,d:0,e:0},n=d.dataset;for(j=0,l=n.length;j<l;j++)i=n[j],i.alpha2===a&&(h.score=i[c],h.score<0&&(h.score="N/A"));for(k=0,m=e.length;k<m;k++)f=e[k],g=this._number_to_letter(b,f),assert(g==="a"||g==="b"||g==="c"||g==="d"||g==="e"),h[g]++;return assert(h.a+h.b+h.c+h.d+h.e===h.total,"Integrity problem in profile calculation"),h.a_width=h.a*100/h.total,h.b_width=(h.a+h.b)*100/h.total,h.c_width=(h.a+h.b+h.c)*100/h.total,h.d_width=(h.a+h.b+h.c+h.d)*100/h.total,h.e_width=100,h},b.prototype._get_details=function(a,b){var c,d,e,f;c={questions:[]};for(e=0,f=b.length;e<f;e++)d=b[e],c.questions.push({number:d,l2006:this._number_to_letter(a.db_2006,d),l2008:this._number_to_letter(a.db_2008,d),l2010:this._number_to_letter(a.db_2010,d),l2012:this._number_to_letter(a.db_2012,d)});return c},b.prototype._onToggleMode=function(){var a,b,c;c=this.viewPast,this.viewPast=!$("#profile-toggle input").is(":checked"),a=c!==this.viewPast,this._repaint(),b=$(".explanation");if(!!this.viewPast)return b.hide();b.show();if(a)return $(".future").css("opacity",0).animate({opacity:1},300)},b.prototype._onClick2014=function(a){var b,c,d,e;return b=$(a.delegateTarget),e=b.parents("tr:first"),c=e.attr("data-question-number"),d=b.attr("data-score"),e.find("img").removeClass("active").addClass("inactive"),b.removeClass("inactive").addClass("active"),this.db_2014[c]=parseInt(d),this._repaint2014(),this._animationHackScale($(".year-box.year-2014"))},b.prototype._repaint2014=function(){var a;return a=d.calculateScore(this.db_2014,d.questionSet),$(".scores .year-2014 .bottom").text("Score: "+a)},b.prototype._animationHackScale=function(a,b,c){var d=this;return b==null&&(b=1.3),c==null&&(c=340),"Hacky function to make an element pulse to a new scale and back again.\nFollows a SIN wave. Looks like a heartbeat. Overwrites the font-size property. Hence hacky.",a=$(a),a.css("font-size",100),a.animate({"font-size":0},{duration:c,easing:"linear",step:function(c,d){var e,f;return e=c*Math.PI/100,e=1+Math.sin(e)*(b-1),f="scale("+e+","+e+")",a.css({"-moz-transform":f,"-o-transform":f,"-ms-transform":f,"-webkit-transform":f,transform:f})}})},b}(Backbone.View)})).call(this)}}),window.require.define({"views/page/rankings":function(a,b,c){((function(){var a,d,e,f,g,h,i,j=function(a,b){return function(){return a.apply(b,arguments)}},k=Object.prototype.hasOwnProperty,l=function(a,b){function d(){this.constructor=a}for(var c in b)k.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},m=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};f=b("views/templates/page/rankings"),g=b("views/templates/rankings_row"),h=b("views/templates/rankings_tooltip"),i=b("util"),e=b("views/reportgenerator"),a=["#B7282E","#F58024","#DAC402","#22aa33"],c.exports=d=function(a){function b(){this._reflow=j(this._reflow,this),this._sortByNameToggle=j(this._sortByNameToggle,this),this._rankingsToggle=j(this._rankingsToggle,this),this.renderPage=j(this.renderPage,this),this.initialize=j(this.initialize,this),b.__super__.constructor.apply(this,arguments)}return l(b,a),b.prototype.sortByName=!1,b.prototype.initialize=function(){return e.bind("update",this._reflow)},b.prototype.renderPage=function(a){return this.$el.html(f()),a.html(this.$el),$(".sortbyname").click(this._sortByNameToggle),$('.sortbyname[data-sortbyname="'+this.sortByName+'"]').addClass("active"),$("#rankings-toggles button").click(this._rankingsToggle),$('button[data-year="2012"]').click()},b.prototype._rankingsToggle=function(a){var b;return b=$(a.delegateTarget),$("#rankings-toggles button").removeClass("active"),b.addClass("active"),this.year=$(a.delegateTarget).attr("data-year"),this._reflow()},b.prototype._count=function(a,b,c){var d,e,f,g;e=0;for(f=0,g=c.length;f<g;f++)d=c[f],a[d]===b&&e++;return e},b.prototype._findScore=function(a,b,c){var d,e,f;for(e=0,f=a.length;e<f;e++){d=a[e];if(d.alpha2===b)return d[c]}return assert(!1,"couldnt find country: "+b)},b.prototype._sortByNameToggle=function(a){var b;return a.preventDefault(),b=$(a.delegateTarget),$(".sortbyname").removeClass("active"),b.addClass("active"),this.sortByName=b.attr("data-sortbyname")==="true",this._reflow(),!1},b.prototype._reflow=function(a,b,c){var d,f,h,j,k,l,n,o,p,q,r,s,t;a==null&&(a=e.dataset),b==null&&(b=e.questionSet),c==null&&(c=e.region),n=$("#rankings-table tbody").empty();if(b.length===0){n.html('<p style="margin: 4px 15px; font-weight: bold; min-width: 400px;">(No questions selected)</p>');return}f=[],l=_EXPLORER_DATASET.regions[c].contains,s=_EXPLORER_DATASET.country;for(o=0,q=s.length;o<q;o++){d=s[o];if(!("db_"+this.year in d))continue;if(t=d.alpha2,!(m.call(l,t)>=0))continue;h=d["db_"+this.year],k={country:d.name,alpha2:d.alpha2,score:this._findScore(a,d.alpha2,this.year),a:this._count(h,100,b),b:this._count(h,67,b),c:this._count(h,33,b),d:this._count(h,0,b),e:this._count(h,-1,b)},k.total=k.a+k.b+k.c+k.d+k.e,k.a_width=k.a*100/k.total,k.b_width=k.b*100/k.total,k.c_width=k.c*100/k.total,k.d_width=k.d*100/k.total,k.e_width=k.e*100/k.total,k.b_left=k.a_width,k.c_left=k.b_width+k.b_left,k.d_left=k.c_width+k.c_left,k.e_left=k.d_width+k.d_left,f.push(k)}this.sortByName?f.sort(i.sortFunctionByName):f.sort(i.sortFunction);for(p=0,r=f.length;p<r;p++)k=f[p],k.score<0&&(k.score="N/A"),j=$(g(k)).appendTo(n);return $(".percentbar").tooltip({placement:"right",delay:50,animation:!0})},b}(Backbone.View)})).call(this)}}),window.require.define({"views/page/splash":function(a,b,c){((function(){var a,d,e=function(a,b){return function(){return a.apply(b,arguments)}},f=Object.prototype.hasOwnProperty,g=function(a,b){function d(){this.constructor=a}for(var c in b)f.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};d=b("views/templates/page/splash"),c.exports=a=function(a){function b(){this.renderPage=e(this.renderPage,this),this.initialize=e(this.initialize,this),b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.initialize=function(){},b.prototype.renderPage=function(a){return this.$el.html(d()),a.html(this.$el)},b}(Backbone.View)})).call(this)}}),window.require.define({"views/page/timeline":function(a,b,c){((function(){var a,d,e,f,g,h=function(a,b){return function(){return a.apply(b,arguments)}},i=Object.prototype.hasOwnProperty,j=function(a,b){function d(){this.constructor=a}for(var c in b)i.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},k=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};e=b("views/templates/page/timeline"),f=b("views/templates/timeline_column"),g=b("util"),d=b("views/reportgenerator"),c.exports=a=function(a){function b(){this._redrawJsPlumb=h(this._redrawJsPlumb,this),this._mouseoverRanking=h(this._mouseoverRanking,this),this._updateReport=h(this._updateReport,this),this._buildRankingTable=h(this._buildRankingTable,this),this._onToggleMode=h(this._onToggleMode,this),this.renderPage=h(this.renderPage,this),this.initialize=h(this.initialize,this),b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.initialize=function(){return d.bind("update",this._updateReport),d.bind("resizeStart",jsPlumb.deleteEveryEndpoint),d.bind("resized",this._redrawJsPlumb)},b.prototype.renderPage=function(a){return this.$el.html(e()),a.html(this.$el),$('input[name="timeline"]').bind("change",this._onToggleMode),this._updateReport()},b.prototype._onToggleMode=function(a){var b;return a==null&&(a=!0),b=$('input[name="timeline"]:checked').val(),assert(b==="rankings"||b==="scores"),b==="rankings"?($(".timeline-cell-score").hide(),$(".timeline-cell-rank").show()):($(".timeline-cell-rank").hide(),$(".timeline-cell-score").show())},b.prototype._buildRankingTable=function(a,b,c){var d,e,f,h,i,j,l,m,n,o,p,q,r,s;i=[];for(d in b){h=b[d];if(!(a in h))continue;if(r=h.alpha2,!(k.call(c,r)>=0))continue;h.score=h[a],i.push(h)}i.sort(g.sortFunction),j=0,e=999,f=0,l=[];for(n=0,p=i.length;n<p;n++)m=i[n],f+=1,m.score<e?(e=m.score,j=f):l.push(m.score),m.rank=j;for(o=0,q=i.length;o<q;o++){m=i[o],m.score<0&&(m.rank="N/A",m.score="N/A");if(s=m.score,k.call(l,s)>=0)m.rank="= "+m.rank}return i},b.prototype._updateReport=function(a,b,c){var e,g,h,i,j,k,l;a==null&&(a=d.dataset),b==null&&(b=d.questionSet),c==null&&(c=d.region),h=$("#timeline-columns");if(h.length===0)return;e="",g=_EXPLORER_DATASET.regions[c].contains,l=[2006,2008,2010,2012];for(j=0,k=l.length;j<k;j++)i=l[j],e+=f({year:i,data:this._buildRankingTable(i,a,g)});return h.html(e),h.find("tr").bind("mouseover",this._mouseoverRanking),this.mouseoverAlpha2||(this.mouseoverAlpha2=$("#timeline-column-2012 tbody tr:first-child").attr("data-alpha2")),this._redrawJsPlumb(),this._onToggleMode()},b.prototype._mouseoverRanking=function(a){var b,c;c=$(a.delegateTarget),b=c.attr("data-alpha2");if(b&&b!==this.mouseoverAlpha2)return this._redrawJsPlumb(b)},b.prototype._redrawJsPlumb=function(a){var b;a==null&&(a=null),a&&(this.mouseoverAlpha2=a),$(".hover").removeClass("hover"),b=$(".timeline-row-"+this.mouseoverAlpha2);if(!b.length)return;return b.addClass("hover"),jsPlumb.deleteEveryEndpoint(),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){var a,c;for(a=0,c=b.length-1;0<=c?a<c:a>c;0<=c?a++:a--)jsPlumb.connect({source:b[a],target:b[a+1],overlays:jsPlumb._custom_overlay});return this.timeout=null},50)},b}(Backbone.View)})).call(this)}}),window.require.define({"views/reportgenerator":function(a,b,c){((function(){var a,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g=Object.prototype.hasOwnProperty,h=function(a,b){function d(){this.constructor=a}for(var c in b)g.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};e=b("views/templates/reportgenerator"),d=!0,a=function(a){function b(){this._clickBoxToggle=f(this._clickBoxToggle,this),this._clickRegionToggle=f(this._clickRegionToggle,this),this._clickGroupToggle=f(this._clickGroupToggle,this),this._setSubtitle=f(this._setSubtitle,this),this._expand_collapse=f(this._expand_collapse,this),this._select_or_clear=f(this._select_or_clear,this),this._updated=f(this._updated,this),this.calculateScore=f(this.calculateScore,this),this.render=f(this.render,this),this.setInitialState=f(this.setInitialState,this),this.debugReports=f(this.debugReports,this),this.initialize=f(this.initialize,this),b.__super__.constructor.apply(this,arguments)}return h(b,a),b.prototype.initialize=function(){return d&&this.debugReports(),this.region=0},b.prototype.debugReports=function(){var a,b,c,d,e,f,g,h,i,j,k;c=_EXPLORER_DATASET.groupings[0].entries[0].qs,j=_EXPLORER_DATASET.country;for(f=0,h=j.length;f<h;f++){a=j[f],k=["db_2006","db_2008","db_2010","db_2012"];for(g=0,i=k.length;g<i;g++)e=k[g],e in a&&(d=this.calculateScore(a[e],c),b=a[e].roundobi,assert(b===d,"ERROR "+a.name+"."+e+" failed data integrity test. Expected OBI="+b+"; I calculated "+d))}return console.log("[debug] Data integrity check complete.")},b.prototype.setInitialState=function(){return this.$el.find("#group-0").click()},b.prototype.render=function(a){var b,c,d=this;return b={groupings0:_EXPLORER_DATASET.groupings.slice(0,3),groupings1:_EXPLORER_DATASET.groupings.slice(3,5),question:function(){var a;a=[];for(c in _EXPLORER_DATASET.question)a.push(_EXPLORER_DATASET.question[c]);return a}(),country:_EXPLORER_DATASET.country,regions:_EXPLORER_DATASET.regions},this.$el.html(e(b)),a.empty().append(this.$el),this.$el.find(".group-toggler").bind("mouseover",this._hoverGroupToggle),this.$el.find(".group-toggler").bind("click",this._clickGroupToggle),this.$el.find(".region-toggler").bind("click",this._clickRegionToggle),this.$el.find(".group-toggler").bind("mouseout",function(a){return d.$el.find(".toggle-box").removeClass("hover")}),this.$el.find(".toggle-box").bind("click",this._clickBoxToggle),this.$el.find(".nav a").bind("click",this._expand_collapse),this.$el.find(".select-or-clear button").bind("click",this._select_or_clear),this.$el.find(".toggle-box").tooltip({placement:"left",delay:100,animation:!0}),this.$el.find("#region-"+this.region).addClass("active"),this.$el.find("#accordion2").on("show",function(){return $(".customize-link").html("&laquo; Hide options")}),this.$el.find("#accordion2").on("hide",function(){return $(".customize-link").html("Customize Report &raquo;")})},b.prototype.calculateScore=function(a,b,c){var d,e,f,g,h;c==null&&(c=!1);if(b.length===0)return 0;d=0,e=0;for(g=0,h=b.length;g<h;g++)f=b[g],a[f]>=0&&(d+=a[f],e++);return e===0?-1:(c&&console.log("result",d,e,d/e,Math.round(d/e),b),Math.round(d/e))},b.prototype._updated=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o;this.questionSet=[],c=$(".toggle-box.select"),m=c||[];for(g=0,j=m.length;g<j;g++)b=m[g],this.questionSet.push(parseInt($(b).attr("id").substr(7)));this.dataset=[],n=_EXPLORER_DATASET.country;for(h=0,k=n.length;h<k;h++){a=n[h],d={country:a.name,alpha2:a.alpha2},o=[2006,2008,2010,2012];for(i=0,l=o.length;i<l;i++){f=o[i];if(!("db_"+f in a))continue;e=this.calculateScore(a["db_"+f],this.questionSet),d[f]=e}this.dataset.push(d)}return this.trigger("update",this.dataset,this.questionSet,this.region)},b.prototype._select_or_clear=function(a){var b;return this._setSubtitle(),this.$el.find(".group-toggler").removeClass("active"),b=$(a.delegateTarget),b.hasClass("select")?$(".toggle-box").addClass("select"):b.hasClass("clear")&&$(".toggle-box").removeClass("select"),this._updated()},b.prototype._expand_collapse=function(a){var b,c;return a.preventDefault(),b=this.$el.find(".inner"),c=$(a.delegateTarget).parents("li"),this.$el.find(".nav li").removeClass("active"),c.addClass("active"),c.hasClass("more-options")?(this.trigger("resizeStart"),b.find("> .more").show(200),b.find("> .less").hide(200)):c.hasClass("less-options")&&(this.trigger("resizeStart"),this.$el.find(".inner .group-toggler:first").click(),this.$el.find(".inner .region-toggler:first").click(),b.find("> .more").hide(200),b.find("> .less").show(200)),!1},b.prototype._setSubtitle=function(a){return a==null&&(a="Custom Report"),this.$el.find(".subtitle").html(a)},b.prototype._hoverGroupToggle=function(a){var b,c;return b=$(a.delegateTarget),c=b.attr("id"),$("#toggle-boxes ."+c).addClass("hover")},b.prototype._clickGroupToggle=function(a){var b,c,d;return a.preventDefault(),b=$(a.delegateTarget),c=b.attr("id"),this.$el.find(".group-toggler").removeClass("active"),b.addClass("active"),this._setSubtitle(b.text()),d=this.$el.find("#toggle-boxes"),d.find(".toggle-box").removeClass("select"),d.find(" ."+c).addClass("select"),this._updated(),!1},b.prototype._clickRegionToggle=function(a){var b;return a.preventDefault(),b=$(a.delegateTarget),this.region=parseInt(b.attr("id").replace("region-","")),this.$el.find(".region-toggler").removeClass("active"),b.addClass("active"),this._updated(),!1},b.prototype._clickBoxToggle=function(a){var b;return a.preventDefault(),b=$(a.delegateTarget),b.hasClass("select")?b.removeClass("select"):b.addClass("select"),this._setSubtitle(),this.$el.find(".group-toggler").removeClass("active"),this._updated(),!1},b}(Backbone.View),c.exports=new a})).call(this)}}),window.require.define({"views/templates/availability_row":function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i=this,j="function",k=c.helperMissing,l=void 0,m=this.escapeExpression;return f+='<tr>\n    <td class="country"><a href="#profile/',h=c.alpha2,g=h||b.alpha2,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"alpha2",{hash:{}})),f+=m(g)+'">',h=c.name,g=h||b.name,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"name",{hash:{}})),f+=m(g)+'</a></td>\n    <td class="flag"><img src="images/flags/',h=c.alpha2,g=h||b.alpha2,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"alpha2",{hash:{}})),f+=m(g)+'.GIF"/></td>\n    <td class="dot"><img src="images/dot/',h=c.prebudgetstatement,g=h||b.prebudgetstatement,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"prebudgetstatement",{hash:{}})),f+=m(g)+'.png"/></td>\n    <td class="dot"><img src="images/dot/',h=c.executivesbudgetproposal,g=h||b.executivesbudgetproposal,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"executivesbudgetproposal",{hash:{}})),f+=m(g)+'.png"/></td>\n    <td class="dot"><img src="images/dot/',h=c.enactedbudget,g=h||b.enactedbudget,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"enactedbudget",{hash:{}})),f+=m(g)+'.png"/></td>\n    <td class="dot"><img src="images/dot/',h=c.citizensbudget,g=h||b.citizensbudget,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"citizensbudget",{hash:{}})),f+=m(g)+'.png"/></td>\n    <td class="dot"><img src="images/dot/',h=c.inyearreports,g=h||b.inyearreports,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"inyearreports",{hash:{}})),f+=m(g)+'.png"/></td>\n    <td class="dot"><img src="images/dot/',h=c.midyearreview,g=h||b.midyearreview,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"midyearreview",{hash:{}})),f+=m(g)+'.png"/></td>\n    <td class="dot"><img src="images/dot/',h=c.yearendreport,g=h||b.yearendreport,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"yearendreport",{hash:{}})),f+=m(g)+'.png"/></td>\n    <td class="dot"><img src="images/dot/',h=c.auditreport,g=h||b.auditreport,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"auditreport",{hash:{}})),f+=m(g)+'.png"/></td>\n</tr>\n',f})}}),window.require.define({"views/templates/explorer":function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'<div id="report-generator">\n</div>\n<div id="explorer">\n</div>\n\n'})}}),window.require.define({"views/templates/page/availability":function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'<div class="document-availability">\n    <h2>Public Availability of Budget Documents</h2>\n\n    <div class="col4">\n      <table id="availability-key">\n        <tr>\n            <th colspan="2">Key</th>\n            </tr>\n            <tr>\n                <td class="dot"><img src="images/dot/PW.png"/></td>\n                <td class="text">Available to the public</td>\n            </tr>\n            <tr>\n                <td class="dot"><img src="images/dot/IU.png"/></td>\n                <td class="text">Available for internal use</td>\n            </tr>\n            <tr>\n                <td class="dot"><img src="images/dot/NP.png"/></td>\n                <td class="text">Not produced</td>\n            </tr>\n      </table>\n      <div id="region">\n          <h6><img src="images/world.png"> Region</h6>\n          <ul id="av-region-toggler">\n              <li><a id="region-0" class="av-region-toggler active" href="#">Entire World</a></li>\n              <li><a id="region-1" class="av-region-toggler" href="#">East Asia &amp; Pacific</a></li>\n              <li><a id="region-2" class="av-region-toggler" href="#">Eastern Europe &amp; Central Asia</a></li>\n              <li><a id="region-3" class="av-region-toggler" href="#">Latin America &amp; Caribbean</a></li>\n              <li><a id="region-4" class="av-region-toggler" href="#">Middle East &amp; North Africa</a></li>\n              <li><a id="region-5" class="av-region-toggler" href="#">South Asia</a></li>\n              <li><a id="region-6" class="av-region-toggler" href="#">Sub-Saharan Africa</a></li>\n              <li><a id="region-7" class="av-region-toggler" href="#">Western Europe &amp; the U.S.</a></li>\n          </ul>\n        </div>\n    </div>\n    <div class="col8">\n        <div class="year-selector btn-group" id="year-toggles">\n            <button data-year="2006" class="btn">2006</button>\n            <button data-year="2008" class="btn">2008</button>\n            <button data-year="2010" class="btn">2010</button>\n            <button data-year="2012" class="btn">2012</button>\n        </div>\n        <table id="availability" class="table table-striped table-condensed">\n            <thead>\n                <tr>\n                    <td class="country">&nbsp;</td>\n                    <td class="flag">&nbsp;</td>\n                    <td class="dot">Pre-Budget Statement</td>\n                    <td class="dot">Executive\'s Budget Proposal</td>\n                    <td class="dot">Enacted Budget</td>\n                    <td class="dot">Citizens Budget</td>\n                    <td class="dot">In-Year Reports</td>\n                    <td class="dot">Mid-Year Review</td>\n                    <td class="dot">Year-End Report</td>\n                    <td class="dot">Audit Report</td>\n                </tr>\n            </thead>\n            <tbody>\n            </tbody>\n        </table>\n    </div>\n    <div class="clearfix"></div>\n</div>'})}}),window.require.define({"views/templates/page/download":function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var d="",e;return d+='\n        <tr><td style="text-align: right;">',i=c.format,e=i||a.format,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"format",{hash:{}})),d+=o(e)+'</td><td><a href="downloads/',i=c.filename,e=i||a.filename,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"filename",{hash:{}})),d+=o(e)+'">',i=c.filename,e=i||a.filename,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"filename",{hash:{}})),d+=o(e)+"</a> (",i=c.size,e=i||a.size,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"size",{hash:{}})),d+=o(e)+")</td></tr>\n      ",d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<div class="pull-left download-data1">\n  <h2>Download the Entire Dataset</h2>\n  <p>The entire dataset encompassing the 2006-2012 surveys is available in multiple formats:</p>\n  <table class="table table-bordered" style="width: 300px;"\n      <tr><th style="text-align: right;">Format</th><th>Filename</th></tr>\n      ',i=c.downloads,g=i||b.downloads,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+='\n  </table>\n</div>\n<div class="pull-left download-data2">\n  <h2>Save Custom Report</h2>\n  <p>The report generated in your browser can be saved to disk as a CSV. Copy the contents of the textbox below, or click "Save To Disk".</p>\n  <label class="radio inline">\n    <input type="radio" name="downloadyear" value="all" checked>\n      All&nbsp;years\n  </label>\n  <label class="radio inline">\n    <input type="radio" name="downloadyear" value="2006">\n      2006\n  </label>\n  <label class="radio inline">\n    <input type="radio" name="downloadyear" value="2008">\n      2008\n  </label>\n  <label class="radio inline">\n    <input type="radio" name="downloadyear" value="2010">\n      2010\n  </label>\n  <label class="radio inline">\n    <input type="radio" name="downloadyear" value="2012">\n      2012\n  </label>\n\n  <p id="downloadify">\n    <b>"Save To Disk" not available. (Requires Flash 10).</b><br/> This file cannot be downloaded automatically: Click on the textbox, then use cut-and-paste to save the contents into a text file on your computer.\n  </p>\n  <textarea id="custom-csv"" readonly>\n    Loading...\n  </textarea>\n</div>\n<div class="clearfix"></div>\n',f})}}),window.require.define({"views/templates/page/map":function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'<div class="year-selector btn-group" id="map-toggles">\n    <button data-year="2006" class="btn">2006</button>\n    <button data-year="2008" class="btn">2008</button>\n    <button data-year="2010" class="btn">2010</button>\n    <button data-year="2012" class="btn">2012</button>\n</div>\n<div id="map" class="pull-left"></div>\n<div id="map-gradient" class="pull-left"></div>\n<div id="map-gradient-label" class="pull-left">\n  <p class="first">100</p>\n  <p>80</p>\n  <p>60</p>\n  <p>40</p>\n  <p class="penultimate">20</p>\n  <p>0</p>\n</div>\n<div class="clearfix"></div>\n'})}}),window.require.define({"views/templates/page/profile":function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var d="",e;return d+='\n<option value="',i=c.alpha2,e=i||a.alpha2,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"alpha2",{hash:{}})),d+=o(e)+'">',i=c.name,e=i||a.name,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"name",{hash:{}})),d+=o(e)+"</option>\n",d}function q(a,b){return"\n  <h3>Select a country...</h3>\n"}function r(a,b){var d="",e,f;d+="\n  ",i=c.main_website_url,e=i||a.main_website_url,f=c["if"],j=k.program(6,s,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+="\n  <h3>Country profile: ",i=c.data,e=i||a.data,f=c["with"],j=k.program(9,u,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+=" (",i=c.alpha2,e=i||a.alpha2,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"alpha2",{hash:{}})),d+=o(e)+')</h3>\n  <table class="percentages">\n  </table>\n  <div id="profile-mode">\n    <div class="scores">\n      <div class="year-box year-2006 badge">\n        <span class="top">2006</span><span class="bottom"></span>\n      </div>\n      <div class="year-box year-2008 badge">\n        <span class="top">2008</span><span class="bottom"></span>\n      </div>\n      <div class="year-box year-2010 badge">\n        <span class="top">2010</span><span class="bottom"></span>\n      </div>\n      <div class="year-box year-2012 badge">\n        <span class="top">2012</span><span class="bottom"></span>\n      </div>\n      <div class="year-box year-2014 badge badge-success future">\n        <span class="top">2014</span><span class="bottom"></span>\n      </div>\n      <div class="clearfix"></div>\n    </div>\n    <br/>\n    <div>\n      <label class="checkbox" id="profile-toggle">\n          <input type="checkbox"> Show 2014 Calculator...\n      </label>\n    </div>\n    <p class="explanation future">Click on the letters below to calculate the possible outcome of the 2014 survey.<br/>Changing the value of a question automatically updates the score.</p>\n  </div>\n  <div style="position: relative;">\n    <div class="details"></div>\n    <div class="question-box">\n    </div>\n  </div>\n  <div class="clearfix"></div>\n',d}function s(a,b){var d="",e,f;d+='\n    <a class="main-website-link" href="',i=c.main_website_url,e=i||a.main_website_url,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"main_website_url",{hash:{}})),d+=o(e)+'">View ',i=c.data,e=i||a.data,f=c["with"],j=k.program(7,t,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+=" on IBP Site &raquo;</a>\n  ",d}function t(a,b){var d;return i=c.name,d=i||a.name,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"name",{hash:{}})),o(d)}function u(a,b){var d;return i=c.name,d=i||a.name,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"name",{hash:{}})),o(d)}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<div class="country-nav-select-outer">\n<h3>Country:&nbsp;&nbsp;\n<select class="country-nav-select">\n<option value="">Select a country...</option>\n',i=c.countries,g=i||b.countries,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='\n</select></h3>\n</div>\n<div id="country-profile">\n',i=c.empty,g=i||b.empty,h=c["if"],j=k.program(3,q,e),j.hash={},j.fn=j,j.inverse=k.program(5,r,e),g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n</div>\n",f})}}),window.require.define({"views/templates/page/rankings":function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'<div class="country-rankings">\n    <div class="year-selector btn-group" id="rankings-toggles">\n        <button data-year="2006" class="btn">2006</button>\n        <button data-year="2008" class="btn">2008</button>\n        <button data-year="2010" class="btn">2010</button>\n        <button data-year="2012" class="btn">2012</button>\n    </div>\n    <table id="rankings-table">\n        <thead>\n            <tr>\n                <th class="col1" colspan="2"><a href="#" class="sortbyname" data-sortbyname="true"><span class="text">Name</span> <span class="caret"></span></a></th>\n                <th class="col2" colspan="2"><a href="#" class="sortbyname" data-sortbyname="false"><span class="text">Score</span> <span class="caret"></span></a></th>\n            </tr>\n        </thead>\n        <tbody></tbody>\n    </table>\n</div>\n'})}}),window.require.define({"views/templates/page/rawdata":function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var d="",e;return d+="\n      <li>",i=c.alpha2,e=i||a.alpha2,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"alpha2",{hash:{}})),d+=o(e)+"</li>\n    ",d}function q(a,b){var d="",e,f;d+='\n    <div class="question">\n      ',i=c.in_index,e=i||a.in_index,f=c["if"],j=k.program(4,r,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+='\n      <span class="text">\n          <span class="number">',i=c.number,e=i||a.number,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"number",{hash:{}})),d+=o(e)+": </span> \n          ",i=c.text,e=i||a.text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"text",{hash:{}})),d+=o(e)+'\n          <a class="expand" href="#">[...]</a>\n      </span>\n      <span class="answer a"><span class="prefix">A: </span>',i=c.a,e=i||a.a,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"a",{hash:{}})),d+=o(e)+'</span>\n      <span class="answer b"><span class="prefix">B: </span>',i=c.b,e=i||a.b,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"b",{hash:{}})),d+=o(e)+'</span>\n      <span class="answer c"><span class="prefix">C: </span>',i=c.c,e=i||a.c,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"c",{hash:{}})),d+=o(e)+"</span>\n      ",i=c.d,e=i||a.d,f=c["if"],j=k.program(6,s,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;d+="\n      ",i=c.e,e=i||a.e,f=c["if"],j=k.program(8,t,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n    </div>\n    ",d}function r(a,b){return'<span class="label">index</span>'}function s(a,b){var d="",e;return d+='<span class="answer d"><span class="prefix">D: </span>',i=c.d,e=i||a.d,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"d",{hash:{}})),d+=o(e)+"</span>",d}function t(a,b){var d="",e;return d+='<span class="answer e"><span class="prefix">E: </span>',i=c.e,e=i||a.e,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"e",{hash:{}})),d+=o(e)+"</span>",d}function u(a,b){var d="",e,f;d+='\n        <h4 style="border-bottom: 1px solid #000; margin-top: 15px;">',i=c.by,e=i||a.by,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"by",{hash:{}})),d+=o(e)+"</h4>\n        ",i=c.entries,e=i||a.entries,f=c.each,j=k.program(11,v,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n    ",d}function v(a,b){var d="",e,f;d+='\n            <h6 style="margin-bottom: 0;">',i=c.title,e=i||a.title,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"title",{hash:{}})),d+=o(e)+":</h6>\n            <p>",i=c.qs,e=i||a.qs,f=c.each,j=k.program(12,w,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="</p>\n        ",d}function w(a,b){var c="",d;return d=a,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"this",{hash:{}})),c+=o(d)+", ",c}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<div class="row">\n<div class="span2">\n    <h3>Countries</h3>\n    <ul>\n    ',i=c.country,g=i||b.country,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='\n    </ul>\n</div>\n<div class="span6">\n    <h3>Questions</h3>\n    ',i=c.question,g=i||b.question,h=c.each,j=k.program(3,q,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='\n</div>\n<div class="span4">\n    <h3>Groupings</h3>\n    ',i=c.groupings,g=i||b.groupings,h=c.each,j=k.program(10,u,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n</div>\n</div>\n",f})}}),window.require.define({"views/templates/page/splash":function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'<div class="splash">\n  <a href="#map" class="banner">\n    The <strong>Open Budget Survey</strong> is a comprehensive analysis and survey that evaluates whether governments give the public access to budget information and opportunities to participate in the budget process at the national level. The Survey also assesses the capacity and independence of formal oversight institutions. The IBP works with civil society partners in 100 countries to collect the data for the Survey.\n  </a>\n  <div class="row">\n    <div class="span4">\n      <a class="pod rankings" href="#rankings">To easily measure the commitment to transparency, IBP created the <strong>Open Budget Index</strong> from the Survey. </a>\n    </div>\n    <div class="span4">\n      <a class="pod timeline" href="#timeline">The <strong>Open Budget Index</strong> allows for comparisons among countries and across years.\n      </a>\n    </div>\n    <div class="span4">\n      <a class="pod calculator" href="#profile">Use the <strong>2014 calculator</strong> to predict the outcome of the next survey and see where transparency can improve.</a>\n    </div>\n  </div>\n</div>\n'})}}),window.require.define({"views/templates/page/timeline":function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f,g=this;return'<div class="timeline-header">\n    <h2 class="pull-left">Timeline</h2>\n    <h4 class="pull-left">View:</h4>\n    <div class="timeline-toggle pull-left">\n      <label class="radio">\n        <input type="radio" name="timeline" value="rankings" checked>\n        Rankings\n      </label>\n      <label class="radio">\n        <input type="radio" name="timeline" value="scores">\n        Scores\n      </label>\n    </div>\n    <div class="clearfix"></div>\n</div>\n<div id="timeline-columns"></div>\n'})}}),window.require.define({"views/templates/profile_details":function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var d="",e,f;d+='\n  <tr class="question-row" data-question-number="',i=c.number,e=i||a.number,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"number",{hash:{}})),d+=o(e)+'">\n    <td class="number">',i=c.number,e=i||a.number,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"number",{hash:{}})),d+=o(e)+'</td>\n    <td class="letter">',i=c.l2006,e=i||a.l2006,f=c["if"],j=k.program(2,q,b),j.hash={},j.fn=j,j.inverse=k.program(4,r,b),e=f.call(a,e,j);if(e||e===0)d+=e;d+='</td>\n    <td class="letter">',i=c.l2008,e=i||a.l2008,f=c["if"],j=k.program(6,s,b),j.hash={},j.fn=j,j.inverse=k.program(8,t,b),e=f.call(a,e,j);if(e||e===0)d+=e;d+='</td>\n    <td class="letter">',i=c.l2010,e=i||a.l2010,f=c["if"],j=k.program(10,u,b),j.hash={},j.fn=j,j.inverse=k.program(12,v,b),e=f.call(a,e,j);if(e||e===0)d+=e;d+='</td>\n    <td class="letter">',i=c.l2012,e=i||a.l2012,f=c["if"],j=k.program(14,w,b),j.hash={},j.fn=j,j.inverse=k.program(16,x,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+='</td>\n    <td class="space"></td>\n  </tr>\n  ',d}function q(a,b){var d="",e;return d+='<img src="images/letter/',i=c.l2006,e=i||a.l2006,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"l2006",{hash:{}})),d+=o(e)+'.png"/>',d}function r(a,b){return"-"}function s(a,b){var d="",e;return d+='<img src="images/letter/',i=c.l2008,e=i||a.l2008,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"l2008",{hash:{}})),d+=o(e)+'.png"/>',d}function t(a,b){return"-"}function u(a,b){var d="",e;return d+='<img src="images/letter/',i=c.l2010,e=i||a.l2010,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"l2010",{hash:{}})),d+=o(e)+'.png"/>',d}function v(a,b){return"-"}function w(a,b){var d="",e;return d+='<img src="images/letter/',i=c.l2012,e=i||a.l2012,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"l2012",{hash:{}})),d+=o(e)+'.png"/>',d}function x(a,b){return"-"}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='\n<table class="table table-condensed">\n  <tr>\n    <th></th>\n    <th><span class="badge">2006</span></th>\n    <th><span class="badge">2008</span></th>\n    <th><span class="badge">2010</span></th>\n    <th><span class="badge">2012</span></th>\n    <th class="space"></th>\n  </tr>\n  ',i=c.questions,g=i||b.questions,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n</table>\n",f})}}),window.require.define({"views/templates/profile_details_future":function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var d="",e,f;d+='\n  <tr class="question-row" data-question-number="',i=c.number,e=i||a.number,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"number",{hash:{}})),d+=o(e)+'">\n    <td class="number">',i=c.number,e=i||a.number,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"number",{hash:{}})),d+=o(e)+'</td>\n    <td class="letter">',i=c.l2012,e=i||a.l2012,f=c["if"],j=k.program(2,q,b),j.hash={},j.fn=j,j.inverse=k.program(4,r,b),e=f.call(a,e,j);if(e||e===0)d+=e;d+='</td>\n    <td class="letter multi">\n      ',i=c.l2012,e=i||a.l2012,f=c["if"],j=k.program(6,s,b),j.hash={},j.fn=j,j.inverse=k.program(8,t,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+='\n    </td>\n    <td class="space"></td>\n  </tr>\n  ',d}function q(a,b){var d="",e;return d+='<img src="images/letter/',i=c.l2012,e=i||a.l2012,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"l2012",{hash:{}})),d+=o(e)+'.png"/>',d}function r(a,b){return"-"}function s(a,b){return'\n        <img src="images/letter/a.png" class="inactive" data-score="100"/>\n        <img src="images/letter/b.png" class="inactive" data-score="67"/>\n        <img src="images/letter/c.png" class="inactive" data-score="33"/>\n        <img src="images/letter/d.png" class="inactive" data-score="0"/>\n        <img src="images/letter/e.png" class="inactive" data-score="-1"/>\n      '}function t(a,b){return"\n        -\n      "}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='\n<table class="table table-condensed">\n  <tr>\n    <th></th>\n    <th><span class="badge">2012</span></th>\n    <th><span class="badge badge-success">2014</span></th>\n    <th class="space"></th>\n  </tr>\n  ',i=c.questions,g=i||b.questions,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n</table>\n",f})}}),window.require.define({"views/templates/profile_percentages":function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var d="",e,f;d+='\n  <tr>\n    <td class="year"><span class="badge">',i=c.year,e=i||a.year,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"year",{hash:{}})),d+=o(e)+':</span></td>\n    <td class="score">',i=c.not_defined,e=i||a.not_defined,f=c["if"],j=k.program(2,q,b),j.hash={},j.fn=j,j.inverse=k.program(4,r,b),e=f.call(a,e,j);if(e||e===0)d+=e;d+='</td>\n    <td class="bar">\n      ',i=c.not_defined,e=i||a.not_defined,f=c["if"],j=k.program(6,s,b),j.hash={},j.fn=j,j.inverse=k.program(8,t,b),e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n    </td>\n  </tr>\n",d}function q(a,b){return" "}function r(a,b){var d="",e;return d+="Score: ",i=c.score,e=i||a.score,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"score",{hash:{}})),d+=o(e),d}function s(a,b){return'\n        <div class="percentbar disabled">(Not surveyed)</div>\n      '}function t(a,b){var d="",e;return d+="\n        <div class=\"percentbar\" title=\"<table class='percentbar-tooltip'>\n        <tr><th colspan='4'>Share of questions by letter grade:</th></tr>\n        <tr class='row-a'><td class='letter'>A:</td><td class='left'>",i=c.a,e=i||a.a,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"a",{hash:{}})),d+=o(e)+"</td><td class='middle'>/</td><td class='right'>",i=c.total,e=i||a.total,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"total",{hash:{}})),d+=o(e)+"</td></tr>\n        <tr class='row-b'><td class='letter'>B:</td><td class='left'>",i=c.b,e=i||a.b,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"b",{hash:{}})),d+=o(e)+"</td><td class='middle'>/</td><td class='right'>",i=c.total,e=i||a.total,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"total",{hash:{}})),d+=o(e)+"</td></tr>\n        <tr class='row-c'><td class='letter'>C:</td><td class='left'>",i=c.c,e=i||a.c,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"c",{hash:{}})),d+=o(e)+"</td><td class='middle'>/</td><td class='right'>",i=c.total,e=i||a.total,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"total",{hash:{}})),d+=o(e)+"</td></tr>\n        <tr class='row-d'><td class='letter'>D:</td><td class='left'>",i=c.d,e=i||a.d,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"d",{hash:{}})),d+=o(e)+"</td><td class='middle'>/</td><td class='right'>",i=c.total,e=i||a.total,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"total",{hash:{}})),d+=o(e)+"</td></tr>\n        <tr class='row-e'><td class='letter'>E:</td><td class='left'>",i=c.e,e=i||a.e,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"e",{hash:{}})),d+=o(e)+"</td><td class='middle'>/</td><td class='right'>",i=c.total,e=i||a.total,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"total",{hash:{}})),d+=o(e)+'</td></tr>\n        </table>">\n          <div class="bg-e" style="width: ',i=c.e_width,e=i||a.e_width,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"e_width",{hash:{}})),d+=o(e)+'%"></div>\n          <div class="bg-d" style="width: ',i=c.d_width,e=i||a.d_width,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"d_width",{hash:{}})),d+=o(e)+'%"></div>\n          <div class="bg-c" style="width: ',i=c.c_width,e=i||a.c_width,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"c_width",{hash:{}})),d+=o(e)+'%"></div>\n          <div class="bg-b" style="width: ',i=c.b_width,e=i||a.b_width,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"b_width",{hash:{}})),d+=o(e)+'%"></div>\n          <div class="bg-a" style="width: ',i=c.a_width,e=i||a.a_width,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"a_width",{hash:{}})),d+=o(e)+'%"></div>\n        </div>\n      ',d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;i=c.percentages,g=i||b.percentages,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n",f})}}),window.require.define({"views/templates/question_text":function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var d="",e;return d+='<div class="answer"><b>A: </b>',i=c.a,e=i||a.a,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"a",{hash:{}})),d+=o(e)+"</div>",d}function q(a,b){var d="",e;return d+='<div class="answer"><b>B: </b>',i=c.b,e=i||a.b,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"b",{hash:{}})),d+=o(e)+"</div>",d}function r(a,b){var d="",e;return d+='<div class="answer"><b>C: </b>',i=c.c,e=i||a.c,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"c",{hash:{}})),d+=o(e)+"</div>",d}function s(a,b){var d="",e;return d+='<div class="answer"><b>D: </b>',i=c.d,e=i||a.d,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"d",{hash:{}})),d+=o(e)+"</div>",d}function t(a,b){var d="",e;return d+='<div class="answer"><b>E: </b>',i=c.e,e=i||a.e,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"e",{hash:{}})),d+=o(e)+"</div>",d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<div class="question-template">\n  <div class="question-text">\n    <b>Question ',i=c.number,g=i||b.number,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"number",{hash:{}})),f+=o(g)+":</b> ",i=c.text,g=i||b.text,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"text",{hash:{}})),f+=o(g)+"\n  </div>\n  ",i=c.a,g=i||b.a,h=c["if"],j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n  ",i=c.b,g=i||b.b,h=c["if"],j=k.program(3,q,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n  ",i=c.c,g=i||b.c,h=c["if"],j=k.program(5,r,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n  ",i=c.d,g=i||b.d,h=c["if"],j=k.program(7,s,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+="\n  ",i=c.e,g=i||b.e,h=c["if"],j=k.program(9,t,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n</div>\n",f})}}),window.require.define({"views/templates/rankings_row":function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i=this,j="function",k=c.helperMissing,l=void 0,m=this.escapeExpression;return f+='<tr>\n    <td class="country"><a href="#profile/',h=c.alpha2,g=h||b.alpha2,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"alpha2",{hash:{}})),f+=m(g)+'">',h=c.country,g=h||b.country,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"country",{hash:{}})),f+=m(g)+'</a></td>\n    <td class="flag"><img src="images/flags/',h=c.alpha2,g=h||b.alpha2,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"alpha2",{hash:{}})),f+=m(g)+'.GIF"/></td>\n    <td class="score">',h=c.score,g=h||b.score,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"score",{hash:{}})),f+=m(g)+"</td>\n    <td class=\"bar\">\n      <div class=\"percentbar\" title=\"<table class='percentbar-tooltip'>\n        <tr><th colspan='4'>Share of questions by letter grade:</th></tr>\n        <tr class='row-a'><td class='letter'>A:</td><td class='left'>",h=c.a,g=h||b.a,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"a",{hash:{}})),f+=m(g)+"</td><td class='middle'>/</td><td class='right'>",h=c.total,g=h||b.total,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"total",{hash:{}})),f+=m(g)+"</td></tr>\n        <tr class='row-b'><td class='letter'>B:</td><td class='left'>",h=c.b,g=h||b.b,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"b",{hash:{}})),f+=m(g)+"</td><td class='middle'>/</td><td class='right'>",h=c.total,g=h||b.total,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"total",{hash:{}})),f+=m(g)+"</td></tr>\n        <tr class='row-c'><td class='letter'>C:</td><td class='left'>",h=c.c,g=h||b.c,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"c",{hash:{}})),f+=m(g)+"</td><td class='middle'>/</td><td class='right'>",h=c.total,g=h||b.total,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"total",{hash:{}})),f+=m(g)+"</td></tr>\n        <tr class='row-d'><td class='letter'>D:</td><td class='left'>",h=c.d,g=h||b.d,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"d",{hash:{}})),f+=m(g)+"</td><td class='middle'>/</td><td class='right'>",h=c.total,g=h||b.total,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"total",{hash:{}})),f+=m(g)+"</td></tr>\n        <tr class='row-e'><td class='letter'>E:</td><td class='left'>",h=c.e,g=h||b.e,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"e",{hash:{}})),f+=m(g)+"</td><td class='middle'>/</td><td class='right'>",h=c.total,g=h||b.total,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"total",{hash:{}})),f+=m(g)+'</td></tr>\n        </table>">\n          <div class="bg-a" style="left: 0%; width: ',h=c.a_width,g=h||b.a_width,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"a_width",{hash:{}})),f+=m(g)+'%"></div>\n          <div class="bg-b" style="left: ',h=c.b_left,g=h||b.b_left,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"b_left",{hash:{}})),f+=m(g)+"%; width: ",h=c.b_width,g=h||b.b_width,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"b_width",{hash:{}})),f+=m(g)+'%"></div>\n          <div class="bg-c" style="left: ',h=c.c_left,g=h||b.c_left,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"c_left",{hash:{}})),f+=m(g)+"%; width: ",h=c.c_width,g=h||b.c_width,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"c_width",{hash:{}})),f+=m(g)+'%"></div>\n          <div class="bg-d" style="left: ',h=c.d_left,g=h||b.d_left,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"d_left",{hash:{}})),f+=m(g)+"%; width: ",h=c.d_width,g=h||b.d_width,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"d_width",{hash:{}})),f+=m(g)+'%"></div>\n          <div class="bg-e" style="left: ',h=c.e_left,g=h||b.e_left,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"e_left",{hash:{}})),f+=m(g)+"%; width: ",h=c.e_width,g=h||b.e_width,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"e_width",{hash:{}})),f+=m(g)+'%"></div>\n        </div>\n    </td>\n</tr>\n',f})}}),window.require.define({"views/templates/rankings_tooltip":function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){c=c||a.helpers;var f="",g,h,i=this,j="function",k=c.helperMissing,l=void 0,m=this.escapeExpression;return h=c.alpha2,g=h||b.alpha2,typeof g===j?g=g.call(b,{hash:{}}):g===l&&(g=k.call(b,"alpha2",{hash:{}})),f+=m(g)+" is a great place\n",f})}}),window.require.define({"views/templates/reportgenerator":function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var d="",e,f;d+="\n                    <h6>",i=c.by,e=i||a.by,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"by",{hash:{}})),d+=o(e)+"</h6>\n                    <ul>\n                      ",i=c.entries,e=i||a.entries,f=c.each,j=k.program(2,q,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n                    </ul>\n                ",d}function q(a,b){var d="",e;return d+='\n                      <li><a href="#" class="group-toggler" id="group-',i=c.group_id,e=i||a.group_id,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"group_id",{hash:{}})),d+=o(e)+'">',i=c.title,e=i||a.title,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"title",{hash:{}})),d+=o(e)+"</a></li>\n                      ",d}function r(a,b){var d="",e,f;d+="\n                    <h6>",i=c.by,e=i||a.by,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"by",{hash:{}})),d+=o(e)+"</h6>\n                    <ul>\n                      ",i=c.entries,e=i||a.entries,f=c.each,j=k.program(5,s,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+="\n                    </ul>\n                ",d}function s(a,b){var d="",e;return d+='\n                      <li><a href="#" class="group-toggler" id="group-',i=c.group_id,e=i||a.group_id,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"group_id",{hash:{}})),d+=o(e)+'">',i=c.title,e=i||a.title,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"title",{hash:{}})),d+=o(e)+"</a></li>\n                      ",d}function t(a,b){var d="",e,f;d+='\n                  <a href="#" class="toggle-box ',i=c.groups,e=i||a.groups,f=c.each,j=k.program(8,u,b),j.hash={},j.fn=j,j.inverse=k.noop,e=f.call(a,e,j);if(e||e===0)d+=e;return d+='" id="toggle-',i=c.number,e=i||a.number,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"number",{hash:{}})),d+=o(e)+"\" title=\"<p class='question-tooltip'>",i=c.text,e=i||a.text,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"text",{hash:{}})),d+=o(e)+'</p>">',i=c.number,e=i||a.number,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"number",{hash:{}})),d+=o(e)+"</a>\n                ",d}function u(a,b){var c="",d;return d=a,typeof d===l?d=d.call(a,{hash:{}}):d===n&&(d=m.call(a,"this",{hash:{}})),c+=o(d)+" ",c}function v(a,b){var d="",e;return d+='\n                  <li><a href="#" class="region-toggler" id="region-',i=c.region_index,e=i||a.region_index,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"region_index",{hash:{}})),d+=o(e)+'">',i=c.name,e=i||a.name,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"name",{hash:{}})),d+=o(e)+"</a></li>\n                  ",d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<div class="accordion" id="accordion2">\n  <div class="accordion-group">\n    <div class="accordion-heading">\n      <span class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">\n        <span class="pre-subtitle">Viewing: </span>\n        "<span class="subtitle"></span>"\n        <a class="customize-link" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">\n          Customize Report &raquo;\n        </a>\n      </span>\n    </div>\n    <div id="collapseOne" class="accordion-body collapse">\n      <div class="accordion-inner">\n          <div class="col1 grouplist">\n                ',i=c.groupings0,g=i||b.groupings0,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='\n            </div>\n            <div class="col2 grouplist">\n                ',i=c.groupings1,g=i||b.groupings1,h=c.each,j=k.program(4,r,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='\n            </div>\n            <div class="col3">\n                <div id="toggle-boxes">\n                ',i=c.question,g=i||b.question,h=c.each,j=k.program(7,t,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;f+='\n                <div class="clearfix"></div>\n                <div class="select-or-clear">\n                    <button class="btn btn-primary btn-small select">Select All</button>\n                    <button class="btn btn-small clear">Clear All</button>\n                </div>\n                </div>\n            </div>\n            <div class="col4 grouplist">\n                <h6><img src="images/world.png"/> Region</h6>\n                <ul>\n                  ',i=c.regions,g=i||b.regions,h=c.each,j=k.program(10,v,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+='\n                </ul>\n            </div>\n            <div class="clearfix"></div>\n      </div>\n    </div>\n  </div>\n</div>\n',f})}}),window.require.define({"views/templates/timeline_column":function(a,b,c){c.exports=Handlebars.template(function(a,b,c,d,e){function p(a,b){var d="",e;return d+='\n      <tr class="timeline-row-',i=c.alpha2,e=i||a.alpha2,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"alpha2",{hash:{}})),d+=o(e)+'" data-alpha2="',i=c.alpha2,e=i||a.alpha2,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"alpha2",{hash:{}})),d+=o(e)+'">\n        <td class="timeline-cell-name"><a href="#profile/',i=c.alpha2,e=i||a.alpha2,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"alpha2",{hash:{}})),d+=o(e)+'">',i=c.country,e=i||a.country,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"country",{hash:{}})),d+=o(e)+'</a></td>\n        <td class="timeline-cell-flag"><img src="images/flags/',i=c.alpha2,e=i||a.alpha2,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"alpha2",{hash:{}})),d+=o(e)+'.GIF"/></td>\n        <td class="timeline-cell-score">',i=c.score,e=i||a.score,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"score",{hash:{}})),d+=o(e)+'&nbsp;&nbsp;</td>\n        <td class="timeline-cell-rank">',i=c.rank,e=i||a.rank,typeof e===l?e=e.call(a,{hash:{}}):e===n&&(e=m.call(a,"rank",{hash:{}})),d+=o(e)+"</td>\n      </tr>\n    ",d}c=c||a.helpers;var f="",g,h,i,j,k=this,l="function",m=c.helperMissing,n=void 0,o=this.escapeExpression;f+='<div class="timeline-column" id="timeline-column-',i=c.year,g=i||b.year,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"year",{hash:{}})),f+=o(g)+'">\n  <h4>',i=c.year,g=i||b.year,typeof g===l?g=g.call(b,{hash:{}}):g===n&&(g=m.call(b,"year",{hash:{}})),f+=o(g)+' Survey</h4>\n  <table>\n    <thead>\n      <tr>\n        <th class="timeline-cell-name">Country</th>\n        <th class="timeline-cell-flag"></th>\n        <th class="timeline-cell-score">Score</th>\n        <th class="timeline-cell-rank">Rank</th>\n      </tr>\n    </thead>\n    <tbody>\n    ',i=c.data,g=i||b.data,h=c.each,j=k.program(1,p,e),j.hash={},j.fn=j,j.inverse=k.noop,g=h.call(b,g,j);if(g||g===0)f+=g;return f+="\n    </tbody>\n  </table>\n</div>\n\n",f})}})